(this["webpackJsonpreddit-clone-frontend"]=this["webpackJsonpreddit-clone-frontend"]||[]).push([[0],{101:function(e,t,n){},102:function(e,t,n){},103:function(e,t,n){},110:function(e,t,n){},111:function(e,t,n){},112:function(e,t,n){},113:function(e,t,n){},114:function(e,t,n){},115:function(e,t,n){},116:function(e,t,n){},117:function(e,t,n){},118:function(e,t,n){},217:function(e,t,n){},226:function(e,t,n){},227:function(e,t,n){},228:function(e,t,n){},229:function(e,t,n){},230:function(e,t,n){},231:function(e,t,n){},232:function(e,t,n){},233:function(e,t,n){"use strict";n.r(t);var s=n(0),c=n(1),r=n.n(c),a=n(83),o=n.n(a),i=n(5),u=n(10),l=(n(99),n(6)),b=n(11),d=n(2),j=n.n(d),m=n(3),p=n(4),h=function(){var e=Object(m.a)(j.a.mark((function e(t){var n,s,c,r=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:"",e.prev=1,e.next=4,fetch(t,{method:"get",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}});case 4:return s=e.sent,e.next=7,s.json();case 7:return c=e.sent,e.abrupt("return",c);case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(m.a)(j.a.mark((function e(t,n,s){var c,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,{method:"post",body:JSON.stringify(n),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}});case 3:return c=e.sent,e.next=6,c.json();case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,s){return e.apply(this,arguments)}}(),O=function(){var e=Object(m.a)(j.a.mark((function e(t,n,s){var c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,{method:"put",body:JSON.stringify(n),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}});case 3:return c=e.sent,e.abrupt("return",c);case 7:e.prev=7,e.t0=e.catch(0),console.log({error:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,s){return e.apply(this,arguments)}}(),x=function(){var e=Object(m.a)(j.a.mark((function e(t,n){var s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,{method:"delete",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}});case 3:return s=e.sent,e.abrupt("return",s);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),v="https://api-reddit-clone.herokuapp.com",g=Object(c.createContext)();function N(e){var t=e.children,n=function(){var e=Object(c.useState)(null),t=Object(p.a)(e,2),n=t[0],s=t[1],r=Object(c.useState)(null),a=Object(p.a)(r,2),o=a[0],i=a[1],u=function(){var e=Object(m.a)(j.a.mark((function e(t,n){var c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f("".concat(v,"/api/users/login"),{username:t,password:n});case 3:if((c=e.sent).user){e.next=8;break}return e.abrupt("return",c);case 8:if(!c.user){e.next=12;break}return s(c.user),i(c.token),e.abrupt("return",{user:c.user});case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}(),d=function(){var e=Object(m.a)(j.a.mark((function e(t,n,s){var c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f("".concat(v,"/api/users/create"),{username:t,password:n,email:s});case 3:return c=e.sent,e.abrupt("return",c);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,s){return e.apply(this,arguments)}}(),h=function(){s(null),i(null)},O=function(e){s(Object(b.a)(Object(b.a)({},n),{},{subscriptions:[].concat(Object(l.a)(n.subscriptions),[e])}))},x=function(e){var t=n.subscriptions.filter((function(t){return t!==e}));s(Object(b.a)(Object(b.a)({},n),{},{subscriptions:t}))};return Object(c.useEffect)((function(){var e=function(e){s(e||!1)};return function(){return e()}}),[]),{user:n,token:o,login:u,signup:d,logout:h,subscribe:O,unsubscribe:x}}();return Object(s.jsx)(g.Provider,{value:n,children:t})}var w=function(){return Object(c.useContext)(g)};var y=Object(c.createContext)();function k(e){var t=e.children,n=function(){var e=Object(c.useState)(null),t=Object(p.a)(e,2),n=t[0],s=t[1],r=Object(c.useState)(!1),a=Object(p.a)(r,2),o=a[0],i=a[1];return{message:n,showMessage:o,changeMessage:function(e){s(e),i(!0),setTimeout((function(){i(!1)}),5e3)}}}();return Object(s.jsx)(y.Provider,{value:n,children:t})}var C=function(){return Object(c.useContext)(y)};n(101),n(102),n(103);var S=function(e){var t=e.data,n=e.children,c=t.onClick,r=t.href,a=t.title;return Object(s.jsxs)(i.b,{to:r,className:"sidenav-item",onClick:c,children:[n,Object(s.jsx)("span",{className:"sidenav-item-heading",children:a})]})},_=n(243),D=n(245),M=n(241),P=n(242),E=n(240),I=n(238),q=n(239),A=n(244),L=function(e){var t=e.logout,n=w(),r=Object(c.useState)(null),a=Object(p.a)(r,2),o=a[0],i=a[1],u=Object(c.useState)(!1),l=Object(p.a)(u,2),b=l[0],d=l[1];Object(c.useEffect)((function(){var e=function(){var e=Object(m.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h("".concat(v,"/api/s/user"),n.token);case 3:t=e.sent,i(t.subs),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();n.token?e():i(null)}),[n.token,b]);var f=function(){d(!b)},O=function(e,t){return{href:e,title:t,onClick:f}};return Object(s.jsxs)("div",{id:"nav-subs",children:[Object(s.jsxs)("button",{id:"sub-nav-button",onClick:f,children:[Object(s.jsx)(I.a,{className:"menu-icon"}),Object(s.jsx)("span",{className:"sidenav-button-text",children:"Menu"})]}),b?Object(s.jsxs)("div",{children:[Object(s.jsx)("div",{id:"sidenav-overlay",onClick:f}),Object(s.jsxs)("div",{id:"sub-sidenav",className:b?"sidenav-show":"sidenav-hide",children:[Object(s.jsxs)("header",{className:"sidenav-profile-header",children:[Object(s.jsx)("h5",{className:"sidenav-username",children:n.user.username}),Object(s.jsx)("button",{className:"close-button",onClick:f,children:Object(s.jsx)(q.a,{className:"close-button-icon"})})]}),Object(s.jsxs)("div",{className:"sidenav-section",children:[Object(s.jsx)(S,{data:O("/users/".concat(n.user.username),"Profile"),children:Object(s.jsx)(E.a,{className:"sidenav-item-icon"})}),Object(s.jsx)(S,{data:O("/","Home"),children:Object(s.jsx)(M.a,{className:"sidenav-item-icon"})}),Object(s.jsx)(S,{data:O("/s/all","All"),children:Object(s.jsx)(P.a,{className:"sidenav-item-icon"})}),Object(s.jsx)(S,{data:O("/s/browse","Browse Communities"),children:Object(s.jsx)(_.a,{className:"sidenav-item-icon"})})]}),Object(s.jsxs)("div",{className:"sidenav-section",children:[Object(s.jsx)("h6",{className:"sidenav-heading",children:"My Communities"}),o.length>0?o.map((function(e){return Object(s.jsx)(S,{data:O("/s/".concat(e._id),e.name),children:Object(s.jsx)("div",{className:"sidenav-item-circle",style:e.color?{backgroundColor:e.color}:null})},e._id)})):null]}),Object(s.jsxs)("div",{className:"sidenav-section",children:[Object(s.jsx)("h6",{className:"sidenav-heading",children:"Other"}),Object(s.jsx)(S,{data:O("/submit","Create Post"),children:Object(s.jsx)(A.a,{className:"sidenav-item-icon"})}),Object(s.jsx)(S,{data:O("/s/create","Create Community"),children:Object(s.jsx)(D.a,{className:"sidenav-item-icon"})})]}),Object(s.jsx)("div",{className:"sidenav-button-box",children:Object(s.jsx)("button",{className:"button-outline logout-button",onClick:t,children:"Logout"})}),Object(s.jsx)("div",{className:"blue-box"})]})]}):null]})},R=function(){var e=w(),t=Object(u.g)();return Object(s.jsx)("div",{id:"nav-container",children:Object(s.jsxs)("nav",{id:"top-nav",children:[Object(s.jsx)(i.b,{to:"/",id:"nav-brand",children:"S/eddit"}),Object(s.jsx)("div",{id:"nav-sub-container",children:e.user?Object(s.jsx)(L,{logout:function(){e.logout(),t.push("/")}}):Object(s.jsxs)("div",{className:"nav-buttons",children:[Object(s.jsx)(i.b,{to:"/signup",className:"button-outline nav-button",children:"Sign Up"}),Object(s.jsx)(i.b,{to:"/login",className:"button-filled nav-button",children:"Log In"})]})})]})})},T=(n(110),n(248));function F(){var e=Object(c.useState)({width:void 0,height:void 0}),t=Object(p.a)(e,2),n=t[0],s=t[1];return Object(c.useEffect)((function(){function e(){s({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),n}var V=n(21),Y=n.n(V),B=n(246),J=n(247),U=(n(111),function(e){var t=e.score,n=e.item,r=e.type,a=e.handleChoice,o=w(),i=Object(c.useState)(o.user?localStorage.getItem(n._id):null),u=Object(p.a)(i,2),l=u[0],b=u[1],d=function(e){var t=e.currentTarget.name;l&&l===t?j(null,"up"===t?-1:1):j(t,l&&l!==t?"up"===t?2:-2:"up"===t?1:-1)},j=function(e,t){b(e),null===e?localStorage.removeItem(n._id):localStorage.setItem(n._id,e),a(e,t)};return Object(s.jsxs)("div",{className:"post"===r?"post-score-box":"score-box",children:[Object(s.jsx)("button",{name:"up",onClick:o.user?d:null,className:"invis-button",children:Object(s.jsx)(B.a,{className:"score-arrow up-arrow",style:"up"===l?{color:"var(--orange)"}:null})}),"post"===r?Object(s.jsx)("span",{className:"score-number",children:t}):null,Object(s.jsx)("button",{name:"down",onClick:o.user?d:null,className:"invis-button",children:Object(s.jsx)(J.a,{className:"score-arrow down-arrow",style:"down"===l?{color:"var(--blue)"}:null})})]})}),z=function(e){var t=e.post,n=e.link,r=e.handleRemove,a=Object(c.useState)(t.score),o=Object(p.a)(a,2),l=o[0],b=o[1],d=C(),h=w(),f=F(),g=Object(u.g)(),N=function(){var e=Object(m.a)(j.a.mark((function e(n){var s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you want to delete this post?")){e.next=7;break}return s="".concat(v,"/api/s/").concat(t.sub._id,"/posts/").concat(t._id,"/delete"),e.next=5,x(s,h.token);case 5:e.sent.ok?(d.changeMessage("Post deleted successfully!"),r?r(t._id):g.push("/")):console.log("Not Okay.");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(e,t){b((function(e){return e+t})),k("up"===e||"down"!==e&&null)},k=function(){var e=Object(m.a)(j.a.mark((function e(n){var s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s="".concat(v,"/api/s/").concat(t.sub._id,"/posts/").concat(t._id,"/vote"),e.next=3,O(s,{value:n},h.token);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(s.jsxs)("div",{className:"post-container",children:[f.width>800?Object(s.jsx)(U,{score:l,item:t,type:"post",handleChoice:y}):null,Object(s.jsxs)("article",{children:[Object(s.jsxs)("header",{className:"card-header",children:[Object(s.jsx)(i.b,{to:"/s/".concat(t.sub._id),className:"header-item sub-link",children:t.sub.name}),Object(s.jsx)("span",{className:"header-item",children:"Posted by"}),t.author?Object(s.jsx)(i.b,{to:"/users/".concat(t.author.username),className:"header-item profile-link",children:t.author.username}):"[Deleted]",Object(s.jsx)("span",{className:"header-item",children:Y()(t.dateCreated).startOf("hour").fromNow()}),t.dateEdited?Object(s.jsxs)("span",{className:"header-item edited-item",children:["edited ",Y()(t.dateEdited).startOf("hour").fromNow()]}):null]}),Object(s.jsxs)("main",{className:"card-main",children:[Object(s.jsx)("h2",{className:"post-title",children:t.title}),"video"===t.type?Object(s.jsx)("iframe",{title:t.title,className:"post-content-video",width:"806",height:"453",src:"https://www.youtube.com/embed/".concat(function(e){var t=e.match(/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/);return!(!t||11!==t[7].length)&&t[7]}(t.content)),frameborder:"0",allow:"clipboard-write; encrypted-media;",allowfullscreen:!0}):"link"===t.type?Object(s.jsxs)("div",{children:[" ",Object(s.jsx)("a",{className:"post-content-link",href:t.content,children:t.content})]}):"image"===t.type?Object(s.jsx)("img",{className:"post-image",alt:"Post Image",src:t.content}):Object(s.jsx)("p",{className:"post-content",children:t.content})]}),Object(s.jsxs)("footer",{className:"card-footer",children:[f.width<800?Object(s.jsx)(U,{score:l,item:t,type:"post",handleChoice:y}):null,Object(s.jsxs)("span",{className:"footer-item footer-reply",children:[Object(s.jsx)(T.a,{className:"reply-bubble"}),1===t.commentCount?"1 Comment":t.commentCount+" Comments"]}),h.user&&h.user._id===t.author._id?Object(s.jsx)(i.b,{to:"/s/".concat(t.sub._id,"/posts/").concat(t._id,"/update"),className:"footer-item",children:"Edit"}):null,h.user&&h.user._id===t.author._id?Object(s.jsx)("button",{className:"footer-item",name:"delete",onClick:N,children:"Delete"}):null]})]}),n?Object(s.jsx)(i.b,{to:"/s/".concat(t.sub._id,"/posts/").concat(t._id),className:"post-link"}):null]})},W=(n(112),n(113),function(e){var t=e.heading,n=e.color,c=e.children,r=e.footing;return Object(s.jsxs)("div",{className:"sidebar-item",children:[Object(s.jsx)("header",{className:"sidebar-item-header",style:n?{backgroundColor:n}:null,children:Object(s.jsx)("h2",{className:"heading-white",children:t})}),Object(s.jsx)("main",{className:"sidebar-item-main",children:c}),r?Object(s.jsx)("footer",{className:"sidebar-item-footer",children:r}):null]})}),H=function(e){var t=e.sub,n=e.user,r=e.score,a=w(),o=F(),u=Object(c.useState)(null),l=Object(p.a)(u,2),b=l[0],d=l[1];function f(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),s=e[t];e[t]=e[n],e[n]=s}}Object(c.useEffect)((function(){(function(){var e=Object(m.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h("".concat(v,"/api/s/"));case 2:f((t=e.sent).subs),d(t.subs.slice(0,5));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]);return o.width>950?n?Object(s.jsxs)("div",{id:"sidebar-container",children:[Object(s.jsxs)(W,{heading:Object(s.jsx)("div",{className:"profile-picture"}),children:[Object(s.jsx)("h2",{children:n.username}),Object(s.jsxs)("div",{className:"user-stats",children:[Object(s.jsxs)("div",{className:"user-stat-group",children:[Object(s.jsx)("h5",{className:"user-stat-label",children:"Score"}),Object(s.jsx)("span",{className:"user-stat",children:r})]}),Object(s.jsxs)("div",{className:"user-stat-group",children:[Object(s.jsx)("h5",{className:"user-stat-label",children:"Date Joined"}),Object(s.jsx)("span",{className:"user-stat",children:Y()(n.dateJoined).format("MMMM DD YYYY")})]})]})]}),a.user?Object(s.jsx)(W,{heading:"Create Content",children:Object(s.jsxs)("div",{className:"button-box",children:[Object(s.jsx)(i.b,{to:"/submit",className:"button-filled",children:"Create Post"}),Object(s.jsx)(i.b,{to:"/s/create",className:"button-outline",children:"Create Community"})]})}):null]}):Object(s.jsxs)("div",{id:"sidebar-container",children:[Object(s.jsx)(W,{color:t?t.color:null,heading:"About Community",footing:t.dateCreated?"Created: "+Y()(t.dateCreated).format("MMMM Do YYYY"):null,children:Object(s.jsx)("p",{children:t.description})}),a.user?Object(s.jsx)(W,{heading:"Create Content",color:t?t.color:null,children:Object(s.jsxs)("div",{className:"button-box",children:[Object(s.jsx)(i.b,{to:{pathname:"/submit",state:{subID:t._id}},className:"button-filled",children:"Create Post"}),Object(s.jsx)(i.b,{to:"/s/create",className:"button-outline",children:"Create Community"})]})}):null,Object(s.jsx)(W,{color:t?t.color:null,heading:"Other Communities",footing:Object(s.jsx)("div",{className:"button-box",children:Object(s.jsx)(i.b,{className:"button-filled",to:"/s/browse",children:"All Communities"})}),children:b?b.map((function(e){return Object(s.jsxs)("div",{className:"sub-preview",children:[Object(s.jsx)("div",{className:"small-sub-image sub-image"}),e.name,Object(s.jsx)(i.b,{to:"/s/".concat(e._id),className:"sub-preview-link"},e._id)]})})):null})]}):null},Z=(n(114),function(){return Object(s.jsxs)("div",{className:"lds-facebook",children:[Object(s.jsx)("div",{}),Object(s.jsx)("div",{}),Object(s.jsx)("div",{})]})}),$=n(249),G=function(){var e=w(),t=Object(c.useState)(null),n=Object(p.a)(t,2),r=n[0],a=n[1];Object(c.useEffect)((function(){var t=function(){var t=Object(m.a)(j.a.mark((function t(){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h("".concat(v,"/api/s/user/posts/home"),e.token);case 3:n=t.sent,a(n.posts),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}(),n=function(){var e=Object(m.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h("".concat(v,"/api/s/home/posts/"));case 3:t=e.sent,a(t.posts),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e.user?t():n()}),[e.user,e.token]);var o=function(e){var t=r.filter((function(t){return t._id!==e}));a(t)};return Object(s.jsx)("div",{className:"sub-container",children:r?Object(s.jsxs)("main",{className:"sub-page",children:[Object(s.jsx)("div",{className:"posts-container",children:r.length>0?r.map((function(e){return Object(s.jsx)(z,{post:e,link:!0,handleRemove:o},e._id)})):Object(s.jsxs)("div",{className:"empty-sub",children:[Object(s.jsx)("h1",{children:"Subscribe to communities to get started"}),Object(s.jsx)($.a,{className:"empty-sub-icon"}),Object(s.jsx)(i.b,{to:"/s/browse",className:"button-filled",children:"Browse Communities"})]})}),Object(s.jsx)(H,{sub:e.user?{name:"Homepage",description:"Your personalized homepage"}:{name:"All",description:"All the newest posts from every community"}})]}):Object(s.jsx)(Z,{})})},K=function(){var e=Object(c.useState)(null),t=Object(p.a)(e,2),n=t[0],r=t[1];return Object(c.useEffect)((function(){(function(){var e=Object(m.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h("".concat(v,"/api/s/home/posts/"));case 3:t=e.sent,r(t.posts),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(s.jsx)("div",{className:"sub-container",children:n?Object(s.jsxs)("main",{className:"sub-page",children:[Object(s.jsx)("div",{className:"posts-container",children:n.map((function(e){return Object(s.jsx)(z,{post:e,link:!0},e._id)}))}),Object(s.jsx)(H,{sub:{name:"All",description:"This is a collection of all the communities newest posts"}})]}):Object(s.jsx)(Z,{})})},Q=(n(115),n(116),n(117),function(e){var t=e.subData,n=w(),r=C(),a=Object(c.useState)(null),o=Object(p.a)(a,2),i=o[0],u=o[1];Object(c.useEffect)((function(){n.user.subscriptions.some((function(e){return e===t._id}))&&u(!0)}),[t,n.user]);var l=function(){var e=Object(m.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O("".concat(v,"/api/s/").concat(t._id,"/subscribe"),{body:""},n.token);case 3:e.sent.ok?(r.changeMessage("Now subscribed to ".concat(t.name)),n.subscribe(t._id)):console.log("something went wrong"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(m.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O("".concat(v,"/api/s/").concat(t._id,"/unsubscribe"),{body:""},n.token);case 3:e.sent.ok?(r.changeMessage("Unsubscribed from ".concat(t.name)),n.unsubscribe(t._id)):console.log("something went wrong"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Object(m.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=6;break}return u(!1),e.next=4,b();case 4:e.next=9;break;case 6:return u(!0),e.next=9,l();case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(s.jsx)("div",{className:"subscribe-button-container",children:Object(s.jsx)("button",{onClick:function(){d()},onMouseOver:function(e){e.target.textContent=i?"Leave":"Join?"},onMouseLeave:function(e){e.target.textContent=i?"Joined":"Join"},className:i?"button-outline subscribe-button":"button-filled subscribe-button",children:i?"Joined":"Join"})})}),X=n(250),ee=function(e){var t=e.subData,n=w();return Object(s.jsxs)("header",{className:"sub-header-container",children:[Object(s.jsx)("div",{className:"community-theme",style:t.color?{backgroundColor:t.color}:null}),Object(s.jsx)("div",{className:"lower-header-container",children:Object(s.jsxs)("div",{className:"header-main-container",children:[Object(s.jsx)("div",{className:"sub-image"}),Object(s.jsxs)("div",{className:"header-sub-container",children:[Object(s.jsx)("div",{className:"sub-title-container",children:Object(s.jsx)("h1",{className:"sub-title",children:t.name})}),Object(s.jsxs)("div",{className:"sub-header-buttons",children:[n.user?Object(s.jsx)(Q,{subData:t}):null,n.user&&t.creator===n.user._id?Object(s.jsx)(i.b,{to:"/s/".concat(t._id,"/update"),className:"button-filled nav-button",children:Object(s.jsx)(X.a,{className:"button-icon"})}):null]})]})]})})]})},te=function(){var e=Object(u.i)().subID,t=Object(c.useState)(null),n=Object(p.a)(t,2),r=n[0],a=n[1],o=Object(c.useState)(!1),l=Object(p.a)(o,2),d=l[0],f=l[1];Object(c.useEffect)((function(){(function(){var t=Object(m.a)(j.a.mark((function t(){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f(!0),t.next=3,h("".concat(v,"/api/s/").concat(e));case 3:n=t.sent,a({sub:n.sub,posts:n.posts}),f(!1);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e]);var O=function(e){var t=r.posts.filter((function(t){return t._id!==e}));a(Object(b.a)(Object(b.a)({},r),{},{posts:t}))};return d?Object(s.jsx)(Z,{}):r?Object(s.jsxs)("div",{className:"sub-container",children:[Object(s.jsx)(ee,{subData:r.sub}),Object(s.jsxs)("main",{className:"sub-page",children:[Object(s.jsx)("div",{className:"posts-container",children:r.posts.length>0?r.posts.map((function(e){return Object(s.jsx)(z,{post:e,link:"true",handleRemove:O},e._id)})):Object(s.jsxs)("div",{className:"empty-sub",children:[Object(s.jsx)("h1",{children:"No Posts Yet!"}),Object(s.jsx)($.a,{className:"empty-sub-icon"}),Object(s.jsx)(i.b,{to:{pathname:"/submit",state:{subID:r.sub._id}},className:"button-filled",children:"Create Post"})]})}),Object(s.jsx)(H,{sub:r.sub})]})]}):null},ne=(n(118),n(17)),se=n(19),ce=n(7),re=n(43),ae=(n(54),r.a.forwardRef((function(e,t){var n=e.name,c=e.label,r=e.error,a=Object(re.a)(e,["name","label","error"]);return Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{className:"form-group-label",htmlFor:n,children:c}),Object(s.jsx)("input",Object(b.a)(Object(b.a)({className:r?"form-group-input-error":"form-group-input",name:n},a),{},{ref:t})),r?Object(s.jsx)("span",{className:"error",children:r}):null]})}))),oe=(n(217),function(e){var t=e.handleSubmit,n=e.title,c=e.error,r=e.art,a=e.button,o=e.children;return Object(s.jsxs)("div",{className:"form-container",children:[Object(s.jsx)("div",{className:"form-art art".concat(r)}),Object(s.jsxs)("form",{className:"formy-form",onSubmit:t,children:[Object(s.jsx)("h2",{className:"form-heading",children:n}),c?Object(s.jsx)("div",{className:"error-block",children:c}):null,o,Object(s.jsx)("input",{type:"submit",className:"button-filled",value:a})]})]})}),ie=r.a.forwardRef((function(e,t){var n=e.name,c=e.label,r=e.placeholder,a=e.error;return Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{className:"form-group-label",htmlFor:n,children:c}),Object(s.jsx)("textarea",{className:a?"form-group-textarea-error":"form-group-textarea",name:n,placeholder:r,ref:t}),a?Object(s.jsx)("span",{className:"error",children:a}):null]})})),ue=r.a.forwardRef((function(e,t){var n=e.name,c=e.label,r=e.defaultValue,a=e.optionsArray,o=e.error;return Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{htmlFor:n,className:"form-group-label",children:c}),Object(s.jsx)("select",{name:n,defaultValue:r,ref:t,children:a.map((function(e){return Object(s.jsx)("option",{value:e._id,children:e.name},e._id)}))}),o?Object(s.jsx)("span",{className:"error",children:o}):null]})})),le=function(e){var t=e.edit,n=Object(u.h)();console.log(n);var r=w(),a=C(),o=Object(u.g)(),i=Object(u.i)()||"",l=i.subID,b=i.postID,d=Object(c.useState)("text"),x=Object(p.a)(d,2),g=x[0],N=x[1],y=Object(c.useState)(null),k=Object(p.a)(y,2),S=k[0],_=k[1],D=Object(c.useState)(null),M=Object(p.a)(D,2),P=M[0],E=M[1];Object(c.useEffect)((function(){}),[g]);var I=Object(ne.useForm)({resolver:Object(se.yupResolver)("text"===g?ce.a().shape({title:ce.b().required("Title is required").min(3).max(300).trim(),content:ce.b().max(2e3).trim()}):"image"===g?ce.a().shape({title:ce.b().required("Title is required").min(3).max(300).trim(),image:ce.b().url("Something doesn't look right").required("Valid URL is required").max(100).min(1).trim()}):"video"===g?ce.a().shape({title:ce.b().required("Title is required").min(3).max(300).trim(),video:ce.b().url("Something doesn't look right").required("A link is required").matches(/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/,{message:"Must be a valid YouTube URL"}).max(100).min(1).trim()}):ce.a().shape({title:ce.b().required("Title is required").min(3).max(300).trim(),link:ce.b().url("Something doesn't look right").required("Valid URL is required").max(100).min(1).trim()})),shouldUnregister:!1}),q=I.register,A=I.handleSubmit,L=I.errors,R=I.setValue;Object(c.useEffect)((function(){t||function(){var e=Object(m.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h("".concat(v,"/api/s/user"),r.token);case 2:t=e.sent,_(t.subs);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[r.token,t]),Object(c.useEffect)((function(){t&&function(){var e=Object(m.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h("".concat(v,"/api/s/").concat(l,"/posts/").concat(b));case 2:t=e.sent,console.log(t),t.post.type&&N(t.post.type),t.post.type&&"video"===t.post.type&&R(t.post.type,t.post.content,{shouldValidate:!0}),R("title",t.post.title,{shouldValidate:!0});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[t,b,R,l]);var T=function(){var e=Object(m.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f("".concat(v,"/api/s/").concat(l,"/posts/create"),t,r.token);case 2:(n=e.sent).post?(a.changeMessage(n.message),o.push("/s/".concat(t.sub,"/posts/").concat(n.post._id))):E("Something went wrong");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(m.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n="".concat(v,"/api/s/").concat(l,"/posts/").concat(b,"/update"),e.next=4,O(n,t,r.token);case 4:e.sent.ok?(a.changeMessage("Post updated successfully"),o.push("/s/".concat(t.sub,"/posts/").concat(b))):E("Something went wrong"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log({message:"something went wrong",error:e.t0});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),V=function(e){N(e.target.name)};return Object(s.jsxs)(oe,{handleSubmit:A((function(e){var n=e,s=n.title,c=n.sub,r=n.content,a=n.video,o=n.link,i=n.image;e="video"===g?{title:s,content:a,type:g,sub:c}:"image"===g?{title:s,sub:c,type:g,content:i}:"link"===g?{title:s,sub:c,type:g,content:o}:{title:s,sub:c,type:g,content:r},t?F(e):T(e)})),title:t?"Edit Post":"Create Post",error:P,art:"1",button:t?"Save Changes":"Create Post",children:[Object(s.jsxs)("div",{className:"type-selector",children:[Object(s.jsx)("button",{type:"button",name:"text",onClick:V,className:"text"===g?"type-selection selected":"type-selection",children:"Text"}),Object(s.jsxs)("button",{type:"button",name:"image",onClick:V,className:"image"===g?"type-selection selected":"type-selection",children:[" ","Image"]}),Object(s.jsx)("button",{type:"button",name:"video",onClick:V,className:"video"===g?"type-selection selected":"type-selection",children:"Video"}),Object(s.jsx)("button",{type:"button",name:"link",onClick:V,className:"link"===g?"type-selection selected":"type-selection",children:"Link"})]}),S?Object(s.jsx)(ue,{name:"sub",label:"Community",defaultValue:n.state?n.state.subID:null,optionsArray:S,ref:q,error:L.sub?L.sub.message:null}):null,Object(s.jsx)(ae,{name:"title",type:"text",label:"Title",placeholder:"What did you want everyone to know about?",ref:q,error:L.title?L.title.message:null}),"text"===g?Object(s.jsx)(ie,{name:"content",label:"Content",placeholder:"optional",ref:q,error:L.content?L.content.message:null}):"video"===g?Object(s.jsx)(ae,{name:"video",type:"text",label:"YouTube Video",placeholder:"Please include the full url",ref:q,error:L.video?L.video.message:null}):"link"===g?Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{className:"form-group-label",htmlFor:"link",children:"Link"}),Object(s.jsx)("input",{className:L.link?"form-group-input-error":"form-group-input",name:"link",type:"text",placeholder:"Please include the full url",ref:q}),L.link?Object(s.jsx)("span",{className:"error",children:L.link.message}):null]}):Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{className:"form-group-label",htmlFor:"image",children:"Image Link"}),Object(s.jsx)("input",{className:L.image?"form-group-input-error":"form-group-input",name:"image",type:"text",placeholder:"Please include the full url",ref:q}),L.image?Object(s.jsx)("span",{className:"error",children:L.image.message}):null]})]})},be=function(e){var t=e.edit,n=(Object(u.i)()||"").subID,r=w(),a=C(),o=Object(u.g)(),i=Object(c.useState)(null),l=Object(p.a)(i,2),b=l[0],d=l[1],x=Object(ne.useForm)({resolver:Object(se.yupResolver)(t?ce.a().shape({description:ce.b().required().min(6).max(600)}):ce.a().shape({name:ce.b().required().min(3).max(20).trim().matches(/^[_a-zA-Z0-9]*$/,{message:"cannot contain special characters or spaces"}),description:ce.b().required().min(6).max(600)}))}),g=x.register,N=x.handleSubmit,y=x.setValue,k=x.errors;Object(c.useEffect)((function(){t&&function(){var e=Object(m.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h("".concat(v,"/api/s/").concat(n,"\n      "));case 2:t=e.sent,y("name",t.sub.name),y("description",t.sub.description),y("color",t.sub.color);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[t,y,n]);var S=function(){var e=Object(m.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f("".concat(v,"/api/s/create"),t,r.token);case 3:(n=e.sent).errors?d(n.errors[0].msg):n.sub&&a.changeMessage("New community created!"),o.push("/s/".concat(n.sub._id)),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),d(e.t0),console.log("something wrong in sub creation");case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(m.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O("".concat(v,"/api/s/").concat(n,"/update"),t,r.token);case 3:e.sent.ok?o.push("/s/".concat(n)):console.log("errorsss"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),d(e.t0),console.log("something wrong in sub creation");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(s.jsxs)(oe,{handleSubmit:N((function(e){t?_(e):S(e)})),title:t?"Update Community":"Create Community",error:b,art:"1",button:t?"Save Changes":"Create Community",children:[Object(s.jsx)(ae,{name:"name",label:"Community Name",type:"text",placeholder:"3-20 characters",disabled:t?"disabled":null,ref:g,error:k.name?k.name.message:null}),Object(s.jsx)(ie,{name:"description",label:"Description",placeholder:"min 6 characters",ref:g,error:k.description?k.description.message:null}),Object(s.jsx)(ae,{name:"color",label:"Community Color",type:"color",ref:g})]})},de=(n(226),n(227),n(228),ce.a().shape({content:ce.b().required().min(1).max(600)})),je=function(e){var t=w(),n=C(),r=e.parentComment,a=e.refreshPost,o=e.handleForm,l=e.edit,b=Object(u.i)(),d=b.subID,p=b.postID,h=r?r._id:null,x=Object(ne.useForm)({resolver:Object(se.yupResolver)(de)}),g=x.register,N=x.handleSubmit,y=x.errors,k=x.setValue;Object(c.useEffect)((function(){l&&k("content",r.content,{shouldValidate:!0})}),[r,l,k]);var S=function(){var e=Object(m.a)(j.a.mark((function e(s){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r?console.log(!0):console.log(!1),e.next=4,f("".concat(v,"/api/s/").concat(d,"/posts/").concat(p,"/comments/create"),r?{content:s,parent:r._id}:{content:s},t.token);case 4:e.sent.comment&&(n.changeMessage("Comment created successfully"),a()),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(m.a)(j.a.mark((function e(s){var c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c="".concat(v,"/api/s/").concat(d,"/posts/").concat(p,"/comments/").concat(h,"/update"),e.next=4,O(c,{content:s},t.token);case 4:e.sent.ok?(n.changeMessage("Comment edited successfully"),a()):n.changeMessage("Oops! Something went wrong."),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return t.user?Object(s.jsxs)("form",{className:"comment-form",onSubmit:N((function(e){var t=e.content;l?_(t):S(t)})),children:[Object(s.jsx)(ie,{name:"content",placeholder:"What are your thoughts?",ref:g,error:y.content?y.content.message:null}),Object(s.jsxs)("div",{className:"form-button-container",children:[r?Object(s.jsx)("button",{className:"button-outline",id:"cancel-form",onClick:function(e){e.preventDefault(),o(e)},children:"Cancel"}):null,Object(s.jsx)("button",{className:"button-filled",onClick:N,children:l?"Edit":"Comment"})]})]}):Object(s.jsxs)("div",{className:"no-user-box",children:[Object(s.jsx)("span",{children:"Log in or sign up to leave a comment"}),Object(s.jsxs)("div",{className:"nav-buttons",children:[Object(s.jsx)(i.b,{to:"/signup",className:"button-outline nav-button",children:"Sign Up"}),Object(s.jsx)(i.b,{to:"/login",className:"button-filled nav-button",children:"Log In"})]})]})},me=(n(229),function(e){var t=e.comment,n=e.post,r=e.refreshPost,a=e.layer,o=e.handleRemove,u=e.children,l=C(),b=w(),d=Object(c.useState)(!1),h=Object(p.a)(d,2),f=h[0],g=h[1],N=Object(c.useState)(!1),y=Object(p.a)(N,2),k=y[0],S=y[1],_=Object(c.useState)(t.score),D=Object(p.a)(_,2),M=D[0],P=D[1],E=function(e){"delete"===e.target.name?I():("edit"===e.target.name&&S(!0),f?(g(!1),S(!1)):g(!0))},I=function(){var e=Object(m.a)(j.a.mark((function e(){var s,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you want to delete this comment?")){e.next=8;break}return s="".concat(v,"/api/s/").concat(n?n.sub._id:t.post.sub,"/posts/").concat(n?n._id:t.post._id,"/comments/").concat(t._id,"/delete"),e.next=5,x(s,b.token);case 5:c=e.sent,console.log(c),c.ok?(o?o(t._id):r(),l.changeMessage("Comment Deleted")):l.changeMessage("Oops! Something went wrong!");case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(m.a)(j.a.mark((function e(s){var c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c="".concat(v,"/api/s/").concat(n.sub._id,"/posts/").concat(n._id,"/comments/").concat(t._id,"/vote"),e.next=3,O(c,{value:s},b.token);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(s.jsxs)("div",{className:t.parent?"comment-reply":"comment-container",children:[Object(s.jsxs)("div",{className:"comment",children:[t.author?Object(s.jsx)(U,{score:M,item:t,type:"comment",handleChoice:function(e,t){P((function(e){return e+t})),q("up"===e||"down"!==e&&null)}}):null,Object(s.jsxs)("article",{children:[Object(s.jsxs)("header",{className:"card-header",children:[t.author?Object(s.jsx)(i.b,{className:"header-item profile-link",to:"/users/".concat(t.author.username),children:t.author.username}):Object(s.jsx)("span",{className:"header-item",children:"[deleted]"}),Object(s.jsx)("span",{className:"header-item",children:1===M?M+" point":M+" points"}),Object(s.jsxs)("span",{className:"header-item",children:["- ",Y()(t.dateCreated).startOf("hour").fromNow()]}),t.dateEdited?Object(s.jsxs)("span",{className:"header-item edited-item",children:["edited ",Y()(t.dateEdited).startOf("hour").fromNow()]}):null]}),Object(s.jsx)("main",{className:"card-main",children:Object(s.jsx)("span",{children:t.content?t.content:"[deleted]"})}),b.user&&t.author?Object(s.jsxs)("footer",{className:"card-footer",children:[a<6?Object(s.jsxs)("button",{onClick:E,className:"footer-item",children:[Object(s.jsx)(T.a,{className:"reply-bubble"}),"Reply"]}):null,b.user&&b.user._id===t.author._id?Object(s.jsxs)("div",{className:"footer-button-container",children:[Object(s.jsx)("button",{className:"footer-item",name:"edit",onClick:E,children:"Edit"}),Object(s.jsx)("button",{className:"footer-item",name:"delete",onClick:E,children:"Delete"})]}):null]}):null,f?Object(s.jsx)(je,{post:n,parentComment:t,refreshPost:r,handleForm:E,edit:k}):null]})]}),u]})}),pe=function(e){var t=e.comments,n=e.post,c=e.refreshPost;return Object(s.jsxs)("div",{id:"comments-container",children:[Object(s.jsx)("h3",{children:"Leave A Comment"}),Object(s.jsx)("div",{children:Object(s.jsx)(je,{post:n,refreshPost:c})}),Object(s.jsx)("div",{id:"comments-index",children:t?function e(t,r){return t.map((function(t){return Object(s.jsx)(me,{comment:t,post:n,refreshPost:c,layer:r,children:t.replies?e(t.replies,r+1):null},t._id)}))}(t,1):null})]})},he=function(){var e=Object(u.i)(),t=e.subID,n=e.postID,r=Object(c.useState)(null),a=Object(p.a)(r,2),o=a[0],i=a[1],l=Object(c.useState)(!1),b=Object(p.a)(l,2),d=b[0],f=b[1];Object(c.useEffect)((function(){(function(){var e=Object(m.a)(j.a.mark((function e(){var s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.next=3,h("".concat(v,"/api/s/").concat(t,"/posts/").concat(n));case 3:s=e.sent,i(s.post),f(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[n,t]);var O=function(){var e=Object(m.a)(j.a.mark((function e(){var s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.next=3,h("".concat(v,"/api/s/").concat(t,"/posts/").concat(n));case 3:s=e.sent,i(s.post),f(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(s.jsx)("div",{children:d?Object(s.jsx)(Z,{}):o?Object(s.jsxs)("div",{className:"post-details-container",children:[Object(s.jsxs)("div",{className:"post-details",children:[Object(s.jsx)(z,{post:o}),Object(s.jsx)(pe,{comments:o.comments,post:o,refreshPost:O})]}),Object(s.jsx)(H,{sub:o.sub})]}):null})},fe=ce.a().shape({username:ce.b().required().min(3).max(20).trim().matches(/^[_a-zA-Z0-9]*$/,{message:"cannot contain special characters or spaces"}),password:ce.b().required().min(6).max(40),email:ce.b().required().email()}),Oe=function(){var e=Object(c.useState)(null),t=Object(p.a)(e,2),n=t[0],r=t[1],a=w(),o=C(),i=Object(u.g)(),l=Object(ne.useForm)({resolver:Object(se.yupResolver)(fe)}),b=l.register,d=l.handleSubmit,h=l.errors,f=function(){var e=Object(m.a)(j.a.mark((function e(t){var n,s,c,u;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,s=t.password,c=t.email,e.prev=1,e.next=4,a.signup(n,s,c);case 4:(u=e.sent).user?(o.changeMessage("Account created successfully! Please log in."),i.push("/login")):u.errors?(console.log(u),r(u.errors[0].msg)):r("Something went wrong."),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),r(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(s.jsxs)(oe,{handleSubmit:d(f),title:"Sign Up",error:n,art:"2",button:"Create Account",children:[Object(s.jsx)(ae,{name:"username",label:"Username",type:"text",placeholder:"",ref:b,error:h.username?h.username.message:null}),Object(s.jsx)(ae,{name:"password",label:"Password",type:"text",placeholder:"",ref:b,error:h.password?h.password.message:null}),Object(s.jsx)(ae,{name:"email",label:"Email",type:"text",placeholder:"example@example.com",ref:b,error:h.email?h.email.message:null})]})},xe=ce.a().shape({username:ce.b().required().min(3).max(20).trim(),password:ce.b().required().min(6).max(40).trim()}),ve=function(){var e=Object(c.useState)(null),t=Object(p.a)(e,2),n=t[0],r=t[1],a=Object(u.g)(),o=(Object(u.h)().state||{from:{pathname:"/"}}).from,i=w(),l=C(),b=Object(ne.useForm)({resolver:Object(se.yupResolver)(xe)}),d=b.register,h=b.handleSubmit,f=b.errors,O=function(){var e=Object(m.a)(j.a.mark((function e(t){var n,s,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,s=t.password,e.next=3,i.login(n,s);case 3:(c=e.sent).user||r(c.message),c.user&&(a.replace(o),l.changeMessage("Welcome back ".concat(c.user.username)));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(s.jsxs)(oe,{handleSubmit:h(O),title:"Log In",error:n,art:"2",button:"Log In",children:[Object(s.jsx)(ae,{name:"username",label:"Username",type:"text",placeholder:"",ref:d,error:f.username?f.username.message:null}),Object(s.jsx)(ae,{name:"password",label:"Password",type:"password",ref:d,error:f.password?f.password.message:null})]})},ge=(n(230),function(){var e=F(),t=(Object(u.i)()||"").username,n=Object(c.useState)("posts"),r=Object(p.a)(n,2),a=r[0],o=r[1],i=Object(c.useState)(null),l=Object(p.a)(i,2),d=l[0],f=l[1];Object(c.useEffect)((function(){(function(){var e=Object(m.a)(j.a.mark((function e(){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h("".concat(v,"/api/users/").concat(t));case 3:n=e.sent,f(n.user),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[t]);var O=function(e){"posts"===e.target.name?o("posts"):o("comments")},x=function(e){var t=d.posts.filter((function(t){return t._id!==e}));f(Object(b.a)(Object(b.a)({},d),{},{posts:t}))},g=function(e){var t=d.comments.filter((function(t){return t._id!==e}));f(Object(b.a)(Object(b.a)({},d),{},{comments:t}))};return d?Object(s.jsxs)("div",{className:"user-profile-container",children:[Object(s.jsxs)("nav",{className:"profile-nav",children:[Object(s.jsxs)("button",{onClick:O,name:"posts",className:"type-selection",style:"posts"===a?{borderBottom:"2px solid #222"}:null,children:["Posts (",d.posts.length,")"]}),Object(s.jsxs)("button",{onClick:O,name:"comments",className:"type-selection",style:"comments"===a?{borderBottom:"2px solid #222"}:null,children:["Comments (",d.comments.length,")"]})]}),Object(s.jsx)("div",{className:"user-profile-content",children:"posts"===a?d.posts.map((function(e){return Object(s.jsx)(z,{post:e,link:"true",handleRemove:x},e._id)})):d.comments.map((function(e){return Object(s.jsxs)("div",{className:"comment-box",children:[Object(s.jsx)("div",{children:e.post?Object(s.jsxs)("span",{children:[e.post.title," posted by ",e.post.author.username]}):Object(s.jsx)("span",{children:"deleted"})}),Object(s.jsx)(me,{comment:e,handleRemove:g})]},e._id)}))}),e.width>800?Object(s.jsx)("div",{className:"user-details",children:Object(s.jsx)(H,{user:d,score:function(){var e=0;return d.posts.forEach((function(t){return e+=t.score})),d.comments.forEach((function(t){return e+=t.score})),e}()})}):null]}):Object(s.jsx)(Z,{})}),Ne=(n(231),function(){var e=w(),t=Object(c.useState)(null),n=Object(p.a)(t,2),r=n[0],a=n[1],o=Object(c.useState)(!1),u=Object(p.a)(o,2),l=u[0],b=u[1];return Object(c.useEffect)((function(){(function(){var e=Object(m.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.next=3,h("".concat(v,"/api/s/"));case 3:t=e.sent,a(t.subs),b(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(s.jsxs)("div",{id:"sub-index-container",children:[Object(s.jsxs)("header",{id:"sub-index-header",children:[Object(s.jsx)("h3",{className:"white-heading",children:"Browse Communities"}),Object(s.jsx)(i.b,{to:"create",className:"button-outline nav-button",children:"Create Community"})]}),Object(s.jsx)("div",{id:"sub-index",children:l?Object(s.jsx)(Z,{}):r?r.map((function(t){return Object(s.jsxs)("div",{className:"sub-preview-large",children:[Object(s.jsxs)("div",{className:"preview-name-box",children:[" ",Object(s.jsx)("div",{className:"sub-circle",style:t.color?{backgroundColor:t.color}:null}),Object(s.jsx)("span",{className:"sub-name preview-item",children:t.name})]}),e.user?Object(s.jsx)(Q,{subData:t}):null,Object(s.jsx)(i.b,{to:"".concat(t._id),className:"sub-preview-link"},t._id)]})})):null})]})}),we=(n(232),function(){var e=C();return e.showMessage?Object(s.jsxs)("div",{className:"flash-container",children:[Object(s.jsx)("aside",{className:"blue-bar"}),Object(s.jsx)("span",{className:"flash-message",children:e.message})]}):null}),ye=function(e){var t=e.children,n=Object(re.a)(e,["children"]),c=w();return Object(s.jsx)(u.b,Object(b.a)(Object(b.a)({},n),{},{render:function(e){var n=e.location;return c.user?t:Object(s.jsx)(u.a,{to:{pathname:"/login",state:{from:n}}})}}))};var ke=function(){return Object(s.jsx)("div",{className:"App",children:Object(s.jsx)(N,{children:Object(s.jsxs)(k,{children:[Object(s.jsx)(we,{}),Object(s.jsxs)(i.a,{children:[Object(s.jsx)(R,{}),Object(s.jsx)("main",{id:"main-container",children:Object(s.jsxs)(u.d,{children:[Object(s.jsx)(u.b,{path:"/users/:username",children:Object(s.jsx)(ge,{})}),Object(s.jsx)(ye,{path:"/s/:subID/update",children:Object(s.jsx)(be,{edit:!0})}),Object(s.jsx)(ye,{path:"/s/:subID/posts/:postID/update",children:Object(s.jsx)(le,{edit:!0})}),Object(s.jsx)(u.b,{path:"/s/:subID/posts/:postID",children:Object(s.jsx)(he,{})}),Object(s.jsx)(ye,{path:"/s/:subID/submit",children:Object(s.jsx)(le,{})}),Object(s.jsx)(ye,{path:"/s/create",children:Object(s.jsx)(be,{})}),Object(s.jsx)(u.b,{path:"/s/browse",children:Object(s.jsx)(Ne,{})}),Object(s.jsx)(u.b,{path:"/s/all",children:Object(s.jsx)(K,{})}),Object(s.jsx)(u.b,{path:"/s/:subID",children:Object(s.jsx)(te,{})}),Object(s.jsx)(ye,{path:"/submit",children:Object(s.jsx)(le,{})}),Object(s.jsx)(u.b,{path:"/login",children:Object(s.jsx)(ve,{})}),Object(s.jsx)(u.b,{path:"/signup",children:Object(s.jsx)(Oe,{})}),Object(s.jsx)(ye,{path:"/home",children:Object(s.jsx)(G,{})}),Object(s.jsx)(u.b,{path:"/",children:Object(s.jsx)(G,{})})]})})]})]})})})},Ce=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,251)).then((function(t){var n=t.getCLS,s=t.getFID,c=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),s(e),c(e),r(e),a(e)}))};o.a.render(Object(s.jsx)(r.a.StrictMode,{children:Object(s.jsx)(ke,{})}),document.getElementById("root")),Ce()},54:function(e,t,n){},99:function(e,t,n){}},[[233,1,2]]]);
//# sourceMappingURL=main.22460483.chunk.js.map